<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Analysis of Translation</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the new color theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFBEB; /* amber-50 */
            color: #1e3a8a; /* Custom Dark Blue */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23FBBF24' fill-opacity='0.07'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .main-container {
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            overflow: hidden;
        }
        h1, h2, h3 {
            color: #1E40AF; /* blue-800 */
            font-weight: 700;
        }
        .tab-button {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .tab-button.active {
            color: #DC2626; /* red-600 */
            border-left-color: #DC2626;
            background-color: #FEF2F2; /* red-50 */
        }
        .tab-button:hover:not(.active) {
            background-color: #FEFCE8; /* yellow-50 */
            transform: translateX(2px);
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Keyword Highlighting */
        .highlight { font-weight: 600; padding: 0.1rem 0.4rem; border-radius: 0.3rem; }
        .highlight-de { background-color: #FEE2E2; color: #B91C1C; } /* Red Theme */
        .highlight-fe { background-color: #DBEAFE; color: #1E40AF; } /* Blue Theme */
        .highlight-concept { background-color: #FEF9C3; color: #854D0E; } /* Yellow Theme */

        /* Interactive Poem Styles & TTS */
        .clickable-line { cursor: pointer; transition: background-color 0.2s ease-in-out; position: relative; padding: 0.75rem 1rem; border-radius: 0.5rem; flex-grow: 1; }
        .clickable-line:hover { background-color: #FEFCE8; }
        .clickable-line::after { content: '▾'; position: absolute; right: 1rem; top: 50%; transform: translateY(-50%) scale(1.2); color: #94a3b8; transition: transform 0.3s ease; }
        .clickable-line.active::after { transform: translateY(-50%) scale(1.2) rotate(180deg); }
        .translations { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out, padding 0.5s ease-out; background-color: #f8fafc; border-left: 3px solid #DC2626; }
        .translations.show { max-height: 1000px; padding: 0.75rem 0.5rem 0.75rem 1rem; }

        .analysis-text {
            font-style: italic;
            color: #475569; /* slate-600 */
            font-size: 0.9em;
            margin-top: 0.5rem;
            border-left: 2px solid #e2e8f0; /* slate-200 */
            padding-left: 0.75rem;
            margin-left: 0.5rem;
        }

        .tts-button {
            background: none; border: none; cursor: pointer; padding: 0.5rem; border-radius: 50%;
            transition: all 0.2s ease; color: #94a3b8; /* slate-400 */
            flex-shrink: 0;
        }
        .tts-button:hover {
            color: #DC2626; /* red-600 */
            background-color: #FEE2E2; /* red-100 */
        }
        .tts-button.is-speaking {
            color: #B91C1C; /* red-700 */
            background-color: #FECACA; /* red-200 */
            animation: pulse 1.5s infinite;
        }
        .tts-button:disabled {
             cursor: not-allowed;
             opacity: 0.5;
        }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

    </style>
</head>
<body class="antialiased p-2 sm:p-4 md:p-8">

    <div class="container mx-auto max-w-6xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-blue-900 mb-2">The Translator's Lens</h1>
            <p class="text-lg md:text-xl text-blue-800">How Background Shapes Interpretation</p>
        </header>

        <main class="main-container md:grid md:grid-cols-12">
            <!-- Vertical Tab Navigation -->
            <nav class="md:col-span-3 lg:col-span-2 p-4 border-b md:border-b-0 md:border-r border-slate-200">
                <div class="flex flex-col space-y-1">
                    <button data-tab="intro" class="tab-button active w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        Introduction
                    </button>
                    <button data-tab="theory" class="tab-button w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
                        The Theory
                    </button>
                    <button data-tab="translators" class="tab-button w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        The Translators
                    </button>
                    <button data-tab="analysis" class="tab-button w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                        Poem Analysis
                    </button>
                    <button data-tab="limitations" class="tab-button w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></svg>
                        Limitations
                    </button>
                    <a href="https://thearchangel1998.github.io/wrapupgame/" target="_blank" rel="noopener noreferrer" class="tab-button w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="6" x2="10" y1="12" y2="12"/><line x1="8" x2="8" y1="10" y2="14"/><path d="M17.5 15a2.5 2.5 0 0 0 0-5h-3a2.5 2.5 0 0 0 0 5h3Z"/><path d="M3 16V8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z"/></svg>
                        Minigame
                    </a>
                     <button data-tab="presenters" class="tab-button w-full p-3 text-base font-semibold flex items-center justify-start gap-3 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        Presenters
                    </button>
                </div>
            </nav>

            <!-- Tab Content -->
            <div class="md:col-span-9 lg:col-span-10 p-4 md:p-8">
                <!-- Introduction Tab -->
                 <section id="intro" class="tab-content active">
                    <h2 class="text-2xl md:text-3xl mb-6">Introduction & Rationale</h2>
                    <div class="space-y-4 text-base md:text-lg leading-relaxed">
                        <p>The field of translation has evolved beyond a simple exchange of words. It is now seen as a complex process involving <span class="highlight highlight-concept">culture</span>, <span class="highlight highlight-concept">communication</span>, and the <span class="highlight highlight-concept">human element</span>.</p>
                        <p>While theories provide frameworks, a critical point is often understated: <strong class="text-blue-800">the translator plays a pivotal role in shaping the final text.</strong> Their work is influenced by personal experiences, education, and motivations.</p>
                        <p>This study shows how a translator’s background affects their choices, proving they are active interpreters, not neutral conduits.</p>
                    </div>
                </section>
                <!-- Theory Tab -->
                <section id="theory" class="tab-content">
                    <h2 class="text-2xl md:text-3xl mb-6">Nida's Theories of Equivalence</h2>
                     <div class="space-y-8 text-base md:text-lg">
                        <div class="p-6 border-l-4 border-blue-500 bg-blue-50 rounded-r-lg">
                            <h3 class="text-xl md:text-2xl font-semibold mb-2">Formal Equivalence (FE)</h3>
                            <p>This approach centers on the <span class="highlight highlight-fe">source text</span>, aiming for literal correspondence. It preserves original grammar, words, and cultural details, prioritizing <span class="highlight highlight-fe">fidelity to form</span> even if the result sounds less natural.</p>
                        </div>
                        <div class="p-6 border-l-4 border-red-500 bg-red-50 rounded-r-lg">
                            <h3 class="text-xl md:text-2xl font-semibold mb-2">Dynamic Equivalence (DE)</h3>
                             <p>This approach focuses on the <span class="highlight highlight-de">target audience</span>, striving for an <span class="highlight highlight-de">"equivalent effect."</span> It prioritizes <span class="highlight highlight-de">naturalness</span> and adapts the message to create the same emotional and cognitive impact as the original.</p>
                        </div>
                    </div>
                 </section>
                <!-- Translators Tab -->
                <section id="translators" class="tab-content">
                    <h2 class="text-2xl md:text-3xl mb-6">Meet the Translators</h2>
                    <p class="text-center text-slate-500 mb-8 -mt-4">Learn more about the two translators and their approaches.</p>
                    <div class="grid md:grid-cols-2 gap-8 text-base md:text-lg">
                        <div class="bg-slate-50 border border-slate-200 rounded-xl p-6">
                            <h3 class="text-xl md:text-2xl font-semibold">Aileen Palmer</h3>
                            <p class="text-red-600 font-semibold mb-4">The Activist Poet</p>
                            <h4 class="font-bold text-lg text-blue-800">Favors Dynamic Equivalence</h4>
                            <p class="mt-2">Her life as an activist drove her to make messages <span class="highlight highlight-de">accessible</span> and <span class="highlight highlight-de">impactful</span> for a wider audience.</p>
                        </div>
                        <div class="bg-slate-50 border border-slate-200 rounded-xl p-6">
                            <h3 class="text-xl md:text-2xl font-semibold">Huỳnh Sanh Thông</h3>
                            <p class="text-blue-700 font-semibold mb-4">The Scholar</p>
                            <h4 class="font-bold text-lg text-blue-800">Favors Formal Equivalence</h4>
                            <p class="mt-2">His academic career was dedicated to the <span class="highlight highlight-fe">preservation</span> and <span class="highlight highlight-fe">dissemination</span> of literature with <span class="highlight highlight-fe">linguistic fidelity</span>.</p>
                        </div>
                     </div>
                </section>
                <!-- Analysis Tab -->
                <section id="analysis" class="tab-content">
                    <h2 class="text-2xl md:text-3xl mb-6">Case Study: Poem Translations</h2>
                    <div class="border border-slate-200 rounded-xl p-4 md:p-6 mb-8">
                        <h3 class="text-xl md:text-2xl font-bold mb-4">Ngắm Trăng <span class="text-lg md:text-xl font-normal text-slate-500">(Moonlight)</span></h3>
                        <div class="space-y-2 text-base md:text-lg">
                            <div><div class="flex items-center"><p class="clickable-line">Trong tù không rượu cũng không hoa,</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "For prisoners, there is no alcohol nor flowers,"</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text='For prisoners, there is no alcohol nor flowers,'><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">Her more generalized opening and use of "alcohol" show a focus on natural English phrasing and immediate resonance.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "In prison there's no alcohol nor flower,"</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="In prison there's no alcohol nor flower,"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">His translation is very close to the literal meaning, reflecting a commitment to lexical fidelity and directness.</p></div></div></div>
                            <div><div class="flex items-center"><p class="clickable-line">Trước cảnh đẹp đêm nay biết làm thế nào?</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "But the night is so lovely, how can we celebrate it?"</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="But the night is so lovely, how can we celebrate it?"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">She dramatically rephrases the line into a more poetic, emotionally charged question to inject a sense of longing.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "With what to celebrate this lovely night?"</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="With what to celebrate this lovely night?"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">This is a direct and accurate translation, maintaining the original's nuance with slightly more formal phrasing.</p></div></div></div>
                            <div><div class="flex items-center"><p class="clickable-line">Người hướng ra trước song ngắm trăng sáng,</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "I go to the air-hole and stare up at the moon,"</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="I go to the air-hole and stare up at the moon,"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">Specifying "I" and using the evocative "air-hole" prioritizes personal image and emotional impact.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "I go to the window and watch the moon,"</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="I go to the window and watch the moon,"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">Using "window" and "watch" is a straightforward, literal choice, preferring simplicity over interpretive imagery.</p></div></div></div>
                            <div><div class="flex items-center"><p class="clickable-line">Từ ngoài khe cửa, trăng ngắm nhà thơ.</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "And through the air-hole the moon smiles at the poet."</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="And through the air-hole the moon smiles at the poet."><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">"The moon smiles" is a highly emotional, anthropomorphic interpretation that creates a vivid and warm connection.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "The moon peers through the window at the poet."</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="The moon peers through the window at the poet."><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">"The moon peers" is a precise and less anthropomorphic verb, maintaining a more observational tone.</p></div></div></div>
                        </div>
                     </div>
                    <div class="border border-slate-200 rounded-xl p-4 md:p-6">
                        <h3 class="text-xl md:text-2xl font-bold mb-4">Đi Đường <span class="text-lg md:text-xl font-normal text-slate-500">(On The Road)</span></h3>
                        <div class="space-y-2 text-base md:text-lg">
                            <div><div class="flex items-center"><p class="clickable-line">Có đi đường mới biết đường đi khó,</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "Only when out on the road can we take stock of our dangers,"</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="Only when out on the road can we take stock of our dangers,"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">She expands the meaning to "take stock of our dangers" for a more impactful and relatable message.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "He knows the road is rough who walks the road."</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="He knows the road is rough who walks the road."><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">He maintains a close structure to the original with formal English phrasing, demonstrating formal equivalence.</p></div></div></div>
                            <div><div class="flex items-center"><p class="clickable-line">Hết lớp núi này lại tiếp đến lớp núi khác;</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "After we climb one mountain, another looms into view:"</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="After we climb one mountain, another looms into view:"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">"Looms into view" is a dynamic and poetic verb choice that conveys the daunting challenge.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "One mountain range, another mountain range . . ."</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="One mountain range, another mountain range..."><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">The repetition and ellipsis maintain the cumulative feel of the original, mirroring its structure.</p></div></div></div>
                            <div><div class="flex items-center"><p class="clickable-line">Khi đã vượt các lớp núi lên đến đỉnh cao chót,</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "But, once we have struggled up to the top of the mountain range,"</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="But, once we have struggled up to the top of the mountain range,"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">The use of "But" and "struggled up" emphasizes effort and enhances the emotional connection.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "Keep struggling up and reach the highest peak:"</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="Keep struggling up and reach the highest peak:"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">"Keep struggling up" is a strong, accurate translation that maintains the sense of ongoing effort.</p></div></div></div>
                            <div><div class="flex items-center"><p class="clickable-line">Thì muôn dặm nước non thu cả vào tầm mắt.</p></div><div class="translations"><div class="p-2 mb-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-red-700">A. Palmer:</strong> "More than ten thousand li can be surveyed at a glance."</span><button class="tts-button" data-lang="en-US" data-gender="female" data-text="More than ten thousand li can be surveyed at a glance."><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">"Surveyed at a glance" powerfully conveys the visual scope and sense of achievement with natural English.</p></div><div class="p-2"><p class="flex items-center justify-between"><span><strong class="font-semibold text-blue-700">H.S. Thông:</strong> "ten thousand miles will come within your ken."</span><button class="tts-button" data-lang="en-US" data-gender="male" data-text="ten thousand miles will come within your ken."><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg></button></p><p class="analysis-text">The use of the formal idiom "within your ken" highlights scholarly precision and lexical fidelity.</p></div></div></div>
                        </div>
                     </div>
                </section>
                <!-- Limitations Tab -->
                <section id="limitations" class="tab-content">
                    <h2 class="text-2xl md:text-3xl mb-6">Limitations of the Study</h2>
                     <div class="space-y-4 text-base md:text-lg leading-relaxed">
                        <ul class="list-disc list-inside space-y-4">
                            <li><strong class="text-blue-800">Limited Scope:</strong> The analysis is based on only <span class="highlight highlight-concept">two poems</span> and <span class="highlight highlight-concept">two translators</span>. Findings may not be generalizable.</li>
                            <li><strong class="text-blue-800">Qualitative Nature:</strong> Findings are <span class="highlight highlight-concept">interpretive and subjective</span>, based on close reading, not statistics.</li>
                            <li><strong class="text-blue-800">Complexity of Background:</strong> A translator's background is multifaceted and this study cannot account for all <span class="highlight highlight-concept">subtle influences</span>.</li>
                            <li><strong class="text-blue-800">Theoretical Focus:</strong> The analysis primarily uses <span class="highlight highlight-concept">Nida's theories</span>; other frameworks could offer different perspectives.</li>
                        </ul>
                    </div>
                </section>
                <!-- Presenters Tab -->
                <section id="presenters" class="tab-content">
                    <h2 class="text-2xl md:text-3xl mb-6">List of Presenters</h2>
                    <div class="text-base md:text-lg leading-relaxed">
                        <ol class="list-decimal list-inside space-y-1 bg-slate-50 p-6 rounded-lg">
                            <li class="p-2 rounded-md">Ngô Thị Hà</li>
                            <li class="p-2 rounded-md">Đỗ Thành Thái Hiền</li>
                            <li class="p-2 rounded-md">Trịnh Kim Sơn</li>
                            <li class="p-2 rounded-md">Nguyễn Thùy Trang</li>
                            <li class="p-2 rounded-md">Đỗ Thị Kiều Hạnh</li>
                            <li class="p-2 rounded-md">Đỗ Tuấn Nam</li>
                        </ol>
                     </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Tab Navigation ---
            const tabButtons = document.querySelectorAll('.tab-button[data-tab]'); // Select only buttons that switch tabs
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    button.classList.add('active');
                    const tabId = button.dataset.tab;
                    const activeTabContent = document.getElementById(tabId);
                    if (activeTabContent) {
                        activeTabContent.classList.add('active');
                    }
                });
            });
            
            // --- Accordion for Poem Translations ---
            const clickableLines = document.querySelectorAll('.clickable-line');
            clickableLines.forEach(line => {
                line.addEventListener('click', function () {
                    this.classList.toggle('active');
                    this.parentElement.nextElementSibling.classList.toggle('show');
                });
            });

            // --- Text-to-Speech (TTS) Functionality ---
            const synthesis = window.speechSynthesis;
            let voices = [];
            let currentUtterance = null;
            let speakingButton = null;

            // Function to get and enable voices
            function populateVoiceList() {
                voices = synthesis.getVoices();
                if (voices.length > 0) {
                    console.log("Available voices:", voices);
                    document.querySelectorAll('.tts-button').forEach(button => button.disabled = false);
                }
            }
            
            // Initially disable buttons until voices are loaded
            document.querySelectorAll('.tts-button').forEach(button => button.disabled = true);

            // Populate voices when they are loaded
            populateVoiceList();
            if (synthesis.onvoiceschanged !== undefined) {
                synthesis.onvoiceschanged = populateVoiceList;
            }

            // Function to find the best matching British voice
            function findBestBritishVoice(gender) {
                if (!voices || voices.length === 0) return null;

                const genderLC = gender.toLowerCase();
                
                // --- Criteria for voice selection, in order of preference ---
                const criteria = [
                    // 1. Exact match for 'en-GB' and a name that indicates the correct gender.
                    v => v.lang === 'en-GB' && v.name.toLowerCase().includes(genderLC),
                    // 2. Exact match for 'en-GB' and a common default name for that gender.
                    v => v.lang === 'en-GB' && (genderLC === 'female' ? v.name.includes('Female') : v.name.includes('Male')),
                    // 3. Any 'en-GB' voice if a gender-specific one isn't found.
                    v => v.lang === 'en-GB',
                    // 4. Fallback: A voice with "British" in the name for browsers that don't use 'en-GB' lang tag.
                    v => v.name.toLowerCase().includes('british') && v.name.toLowerCase().includes(genderLC),
                    v => v.name.toLowerCase().includes('british'),
                    // 5. Fallback: Google's specific UK English voice names.
                    v => genderLC === 'female' && v.name === 'Google UK English Female',
                    v => genderLC === 'male' && v.name === 'Google UK English Male',
                ];

                for (const criterion of criteria) {
                    const foundVoices = voices.filter(criterion);
                    if (foundVoices.length > 0) {
                        // Prefer non-local service voices as they can be higher quality.
                        const nonLocal = foundVoices.filter(v => !v.localService);
                        return nonLocal.length > 0 ? nonLocal[0] : foundVoices[0];
                    }
                }
                return null; // No British voice found
            }

            function stopSpeech() {
                if(synthesis.speaking) {
                    synthesis.cancel();
                }
                if (speakingButton) {
                    speakingButton.classList.remove('is-speaking');
                    speakingButton = null;
                }
                currentUtterance = null;
            }

            document.querySelectorAll('.tts-button').forEach(button => {
                button.addEventListener('click', function(event) {
                    event.stopPropagation();
                    
                    const textToSpeak = this.dataset.text;
                    const genderAttr = this.dataset.gender;

                    if (speakingButton === this) {
                        stopSpeech();
                        return;
                    }
                    
                    stopSpeech();

                    // Use a timeout to allow the previous speech to fully stop.
                    setTimeout(() => {
                        currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
                        
                        // Find the best available British voice based on gender.
                        let selectedVoice = findBestBritishVoice(genderAttr);

                        // If a British voice is found, use it.
                        if (selectedVoice) {
                            currentUtterance.voice = selectedVoice;
                            console.log(`Using British Voice: ${selectedVoice.name} (${selectedVoice.lang})`);
                        } else {
                            // If no British voice is found, set the language to 'en-GB' as a fallback.
                            currentUtterance.lang = 'en-GB';
                            console.warn("No specific British voice found. Attempting to use browser default for 'en-GB'.");
                        }

                        speakingButton = button;
                        button.classList.add('is-speaking');

                        currentUtterance.onend = () => {
                            if (speakingButton) speakingButton.classList.remove('is-speaking');
                            speakingButton = null;
                            currentUtterance = null;
                        };
                        
                        currentUtterance.onerror = (e) => {
                            console.error('Speech synthesis error:', e);
                            if (speakingButton) speakingButton.classList.remove('is-speaking');
                            speakingButton = null;
                            currentUtterance = null;
                        }

                        synthesis.speak(currentUtterance);
                    }, 100);
                });
            });

            // Stop speech when switching tabs
            document.querySelectorAll('.tab-button[data-tab]').forEach(button => {
                button.addEventListener('click', stopSpeech);
            });
        });
    </script>

</body>
</html>
